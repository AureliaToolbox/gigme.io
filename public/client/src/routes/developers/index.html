<template>
  <table class="table table-striped">
    <thead>
      <th>Title</th>
      <th>Description</th>
      <th>Company</th>
      <th>Type</th>
      <th>Actions</th>
    </thead>
    <tbody>
      <tr repeat.for="listing of listings">
        <template if.bind="!listing.isEditing">
          <td>${listing.title}</td>
          <td>${listing.description}</td>
          <td>
            <span if.bind="listing.company">
              ${listing.company.name}
            </span>
          </td>
          <td>
            <span if.bind="listing.listing_type">
              ${listing.listing_type.name}
            </span>
          </td>
          <td>
            <a href="#" click.trigger="edit(listing)" if.bind="!listing.isEditing">Edit</a>
          </td>
        </template>
        <template if.bind="listing.isEditing">
          <td><input value.bind="listing.title" /></td>
          <td><input value.bind="listing.description" /></td>
          <td>
            <select value.bind="listing.company">
              <option model.bind="null">Choose...</option>
              <option repeat.for="company of companies"
                      model.bind="company">
                ${company.name}
              </option>
            </select>
          </td>
          <td>
            <select value.bind="listing.listing_type">
              <option model.bind="null">Choose...</option>
              <option repeat.for="listing_type of listingTypes"
                      model.bind="listing_type">
                ${listing_type.name}
              </option>
            </select>
          </td>
          <td>
            <a href="#" click.trigger="save(listing)" if.bind="listing.isEditing">Save</a>
          </td>
        </template>
      </tr>
    </tbody>
  </table>
  <button class="btn" click.trigger="add()">Add new</button>
  <button class="btn" click.trigger="createCompany()">Add company</button>
  <button class="btn" click.trigger="createListingType()">Add listing type</button>
</template>
