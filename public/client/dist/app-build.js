System.register("app.html!github:systemjs/plugin-text@0.0.9.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template><require from="./nav-bar"></require><nav-bar router.bind="router"></nav-bar><div class="page-host"><router-view></router-view></div></template>')}}}),System.register("app.js",["aurelia-framework","aurelia-router","./session","bootstrap","bootstrap/css/bootstrap.css!"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.inject},function(a){e=a.Router},function(a){f=a.Session},function(a){},function(a){}],execute:function(){a("App",(g=d(e,f),i=g(h=function(){function a(b,d){c(this,a),this.router=b,this.session=d,this.router.configure(function(a){a.title="Aurelia",a.map([{route:["","home"],moduleId:"./home",nav:!0,title:"Home"}])})}return a.prototype.attached=function(){var a=document.querySelector("#user_info");if(a){var b=a.textContent;this.session.currentUser=new j(b.split("|")[0],b.split("|")[1],b.split("|")[2]),console.log(this.session.currentUser)}},a}())||h)),a("App",i),j=function a(b,d,e){c(this,a),this.username=b,this.uid=d,this.image=e}}}}),System.register("home.html!github:systemjs/plugin-text@0.0.9.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template><section class="container"><div class="row"><div class="col-md-4 col-sm-6"><h2>Newest stuff</h2><div class="panel panel-default" repeat.for="card of newCards"><div class="panel-heading" click.trigger="card.toggleOpen()"><a href="#" class="pull-right">Open</a> <a href="#" class="pull-right" click.trigger="$parent.like(card)"><span class="fa-stack fa-lg ${ card.liked ? \'fa-liked\' : \'fa-like\' }"><i class="fa ${card.liked ? \'fa-heart\' : \'fa-heart-o\'} fa-stack-2x"></i> <strong class="fa-stack-1x heart-text">${card.likes.length}</strong> </span></a><a href="#" class="pull-right views"><span>${card.views} views</span></a><h4>${card.name}</h4></div><div class="panel-body" show.bind="card.open"><div class="list-group">Author: <a class="list-group-item" target="_blank" href="http://github.com/${card.author}">${card.author}</a></div><div class="list-group">Tags: <a class="list-group-item" repeat.for="item of card.news_contents" href="${$parent.card.link}">${item.name}</a></div></div></div></div><div class="col-md-4 col-sm-6"><h2>Most liked</h2><div class="panel panel-default" repeat.for="card of votedCards"><div class="panel-heading" click.trigger="card.toggleOpen()"><a href="#" class="pull-right">Open</a> <a href="#" class="pull-right" click.trigger="$parent.like(card)"><span class="fa-stack fa-lg ${ card.liked ? \'fa-liked\' : \'fa-like\' }"><i class="fa ${card.liked ? \'fa-heart\' : \'fa-heart-o\'} fa-stack-2x"></i> <strong class="fa-stack-1x heart-text">${card.likes.length}</strong> </span></a><a href="#" class="pull-right views"><span>${card.views} views</span></a><h4>${card.name}</h4></div><div class="panel-body" show.bind="card.open"><div class="list-group">Author: <a class="list-group-item" target="_blank" href="http://github.com/${card.author}">${card.author}</a></div><div class="list-group">Tags: <a class="list-group-item" repeat.for="item of card.news_contents" href="${$parent.card.link}">${item.name}</a></div></div></div></div></div></section></template>')}}}),System.register("datacontext.js",["aurelia-http-client","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.HttpClient},function(a){e=a.inject}],execute:function(){f=(new d).configure(function(a){a.withHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}),a("DataContext",g=function(){function a(){c(this,a)}return a.prototype.getNewsItems=function(){return f.get("/news_items.json")},a.prototype.likeCard=function(a){return f.createRequest("/news_items/like.json").asPost().withHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content")).withHeader("Content-Type","application/json").withContent(a).send()},a}()),a("DataContext",g)}}}),System.register("home.js",["aurelia-framework","./datacontext","./session"],function(a,b){"use strict";function c(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){return console.log(a.posted),a.posted-b.posted}function f(a,b){return b.likes.length-a.likes.length}var g,h,i,j,k,l,m,n,o,p,q,r;return{setters:[function(a){g=a.inject,h=a.bindable,i=a.computedFrom},function(a){j=a.DataContext},function(a){k=a.Session}],execute:function(){l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Home",(m=g(j,k),q=m(n=function(){function a(b,c){d(this,a),this.allCards=[],this.newCards=[],this.votedCards=[],this.recentCards=[],this.datacontext=b,this.session=c}return a.prototype.like=function(a){return a.liked||this.datacontext.likeCard(a).then(function(b){var c=JSON.parse(b.response).like;a.likes.push(c)}),event.cancelBubble=!0,event.bubbles=!1,event.stopPropagation(),event.preventDefault(),!1},a.prototype.activate=function(){var a=this,b=this;return this.datacontext.getNewsItems().then(function(c){JSON.parse(c.response).forEach(function(c){var d=new r(c,a.session.currentUser);b.allCards.push(d)}),b.newCards=b.allCards.sort(e).slice(0,5),b.votedCards=b.allCards.sort(f).slice(0,5)})},a}())||n)),a("Home",q),o=i("likes"),p=function(){function a(b,c){var e=this;d(this,a),this.user=c,this._id=b._id,this.name=b.name,this.author=b.author,this.link=b.link,this.posted=new Date(b.posted),this.news_contents=b.news_contents,this.views=b.views,this.likes=[],b.likes&&b.likes.forEach(function(a){e.likes.push(a)}),this.open=!1}return a.prototype.toggleOpen=function(){this.open=!this.open},l(a,[{key:"liked",get:function(){var a=this,b=this.likes.filter(function(b){return b.user_id===a.user.uid});return 0!==b.length}}]),a}(),c(p.prototype,"liked",[o],Object.getOwnPropertyDescriptor(p.prototype,"liked"),p.prototype),r=p}}}),System.register("nav-bar.html!github:systemjs/plugin-text@0.0.9.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){a("__useDefault",c=!0),a("__useDefault",c),a("default",'<template><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"><span class="sr-only">Toggle Navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav"><li class="dropdown"><a href="bootstrap-elements.html" data-target="#" class="dropdown-toggle ellipsis" data-toggle="dropdown" aria-expanded="false" if.bind="session.currentUser"><div style="background-image: url(\'${session.currentUser.image}&amp;s=64\'); width: 32px; height: 32px; background-size: contain; display: inline-block" data-original-title="${name}"></div><span class="ellipsis pull-right">${session.currentUser.username} <b class="caret"></b></span><div class="ripple-wrapper"></div></a><ul class="dropdown-menu dropdown-menu-right"><li><a href="#" click.trigger="signOut()">Sign out</a></li><li class="divider"></li></ul></li><li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}"><a href.bind="row.href">${row.title}</a></li></ul><!--\n      <ul class="nav navbar-nav navbar-right">\n        <li class="loader" if.bind="router.isNavigating">\n          <i class="fa fa-spinner fa-spin fa-2x"></i>\n        </li>\n      </ul> --></div></nav></template>')}}}),System.register("session.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i;return{setters:[function(a){f=a.bindable}],execute:function(){a("Session",(g=function a(){d(this,a),c(this,"currentUser",h,this)},h=e(g.prototype,"currentUser",[f],{enumerable:!0,initializer:null}),i=g)),a("Session",i)}}}),System.register("nav-bar.js",["aurelia-framework","aurelia-http-client","./session"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n;return{setters:[function(a){f=a.inject,g=a.bindable},function(a){h=a.HttpClient},function(a){i=a.Session}],execute:function(){a("NavBar",(j=f(i),n=j((l=function(){function a(b){d(this,a),c(this,"router",m,this),this.session=b}return a.prototype.signOut=function(){var a=new h;a.createRequest("/users/sign_out").asDelete().withHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content")).send().then(function(a){window.location.reload()})},a}(),m=e(l.prototype,"router",[g],{enumerable:!0,initializer:function(){return null}}),k=l))||k)),a("NavBar",n)}}});